<!DOCTYPE html>

<html>

<head>
    <link href="CSS/index.css" rel="stylesheet">
    <link href="CSS/file-selector.css" rel="stylesheet">
    <link href="CSS/results.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PDF Tools</title>
</head>

<body class="no-overflow">
    <nav>
        <a class="title" href="index.html"><span>PDF</span> Tools </a>
        <p class="version">Alpha</p>
        <div class="flex-grow"></div>
        <a class="btn" href="help.html">
            <span class="material-icons">help</span>
            Aide
        </a>
    </nav>

    <div class="table-extractor">
        <div id="fileSelector">
            <!--File selector-->
            <input type="file" id="file" class="file-input big" accept=".pdf" onchange="OnGetDoc(this.files[0])">
            <label for="file" ondrop="OnDragDoc(event)" ondragover="event.preventDefault();">
                <span class="material-icons">picture_as_pdf</span>
                <p>Glissez-déposez un fichier ou cliquez pour séléctionner</p>
            </label>

            <!--Page buttons-->
            <div id="page-selector" class="transparent">
                <button onclick="PreviousPage()" class="circlebtn">
                    <span class="material-icons">arrow_back</span>
                </button>
                <span id="page-id">
                    1
                </span>
                <button onclick="NextPage()" class="circlebtn">
                    <span class="material-icons">arrow_forward</span>
                </button>
                <button onclick="OpenPDF()" class="circlebtn">
                    <span class="material-icons">open_in_new</span>
                </button>
            </div>

            <!--Preview canvas-->
            <div id="preview-canvas-parent">
                <canvas id="preview-canvas">

                </canvas>
            </div>
        </div>


        <div id="results">
            <div id="table-view">
                <!--Grid for the results-->
                <div id="res-grid">
                    <!--Results added with javascript-->
                </div>

                <div id="res-settings">
                    <div class="flex-row">
                        <!--Add column input-->
                        <input type="text" class="textinput" id="new-col-input" placeholder="Nouvelle colonne...">
                        <button onclick="AddColumn()" class="circlebtn">
                            <span class="material-icons">add</span>
                        </button>
                    </div>

                    <div id="res-settings-inner">
                        <p class="settings-title">
                            Paramètres de la colone
                        </p>

                        <select id="setting-select" class="select" onchange="SelectColumn()">
                        </select>

                        <label>
                            Décalage X maximum
                            <a class="helpbtn" href="help.html#decalX">
                                <span class="material-icons">help</span>
                            </a>
                        </label>
                        <input id="max-x-diff" type="number" class="textinput" value="15" onchange="ApplySettings()">

                        <div>
                            <input id="reference-column" type="checkbox" class="checkbox" onchange="ApplySettings()">
                            <label for="reference-column">
                                Utiliser comme colonne de référence
                                <a class="helpbtn" href="help.html#reference-column">
                                    <span class="material-icons">help</span>
                                </a>
                            </label>
                        </div>

                        <div>
                            <input id="align-values" type="checkbox" class="checkbox" onchange="ApplySettings()">
                            <label for="align-values">
                                Aligner les valeurs avec la colonne de référence
                                <a class="helpbtn" href="help.html#align-with-ref">
                                    <span class="material-icons">help</span>
                                </a>
                            </label>
                        </div>

                        <div>
                            <input id="truncate-check" type="checkbox" class="checkbox" onchange="ApplySettings()">
                            <label for="truncate-check">
                                Arrêter le tableau a la fin de la colonne
                                <a class="helpbtn" href="help.html#truncate">
                                    <span class="material-icons">help</span>
                                </a>
                            </label>
                        </div>

                        <button onclick="DeleteColumn(settingsDropdown.value)">
                            <span class="material-icons">delete</span>
                            Supprimer la colonne
                        </button>
                    </div>

                    <div class="tip">
                        <span class="material-icons">lightbulb</span>
                        <strong>Astuce:</strong><br />
                        Cliquez sur le nom d'un colonne dans le tableau pour la renommer.
                        Laissez vide pour la supprimer.
                    </div>
                    <div class="tip">
                        <span class="material-icons">lightbulb</span>
                        <strong>Astuce:</strong><br />
                        Pour trover une colonne, vous pouvez entrer seulement une partie de son nom.
                        Les majuscules ne sont pas prises en compte.
                    </div>
                </div>
            </div>

            <!--Download menu-->
            <div id="download">
                <input type="text" class="textinput" id="file-name" placeholder="Nom du fichier">
                <span>.csv</span>
                <button class="colorbtn" onclick="GetFile()">
                    <span class="material-icons">file_upload</span>
                    Exporter
                </button>
            </div>
        </div>
    </div>
</body>

<script src="PdfJS/build/pdf.js"></script>
<script src="PDFLoader.js"></script>
<script src="TableExtractor.js"></script>

</html>